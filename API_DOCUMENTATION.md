# API Documentation

## Base URL
```
http://localhost:3000/api/items
```

## Endpoints

### 1. GET /api/items
Получение элементов с пагинацией и поиском.

**Query Parameters:**
- `page` (optional) - номер страницы (по умолчанию 1)
- `limit` (optional) - количество элементов (по умолчанию 20, максимум 100)
- `search` (optional) - поисковый запрос

**Примеры запросов:**
```bash
# Получить первые 20 элементов
GET /api/items

# Получить вторую страницу
GET /api/items?page=2

# Поиск по номеру
GET /api/items?search=123

# Поиск по "Item #"
GET /api/items?search=Item #456
```

**Ответ:**
```json
{
  "items": [
    {
      "id": 1,
      "value": 1,
      "label": "Item #1",
      "selected": false
    }
  ],
  "total": 1000000,
  "page": 1,
  "limit": 20,
  "hasMore": true,
  "searchQuery": ""
}
```

### 2. POST /api/items/reorder
Изменение порядка элементов (Drag&Drop).

**Тело запроса:**
```json
{
  "itemIds": [5, 1, 10, 15, 2]
}
```

**Ответ:**
```json
{
  "message": "Order updated successfully",
  "sortOrder": [5, 1, 10, 15, 2]
}
```

### 3. POST /api/items/select
Выбор или отмена выбора элементов.

**Тело запроса:**
```json
{
  "itemIds": [1, 5, 10],
  "action": "select" // или "deselect"
}
```

**Ответ:**
```json
{
  "message": "Items selected successfully",
  "selectedItems": [1, 5, 10]
}
```

### 4. GET /api/items/state
Получение текущего состояния (выбранные элементы, порядок сортировки).

**Ответ:**
```json
{
  "selectedItems": [1, 5, 10],
  "sortOrder": [5, 1, 10, 15, 2],
  "searchQuery": "",
  "totalItems": 1000000
}
```

## Логика работы

### Пагинация
- По умолчанию возвращается 20 элементов
- Максимум 100 элементов за запрос
- Флаг `hasMore` указывает, есть ли еще элементы

### Поиск
- Поиск по номеру элемента (1-1000000)
- Поиск по формату "Item #123"
- Результаты поиска также пагинируются по 20 элементов

### Сортировка
- Пользовательский порядок сохраняется в памяти
- При поиске применяется пользовательский порядок к результатам
- Порядок восстанавливается после перезагрузки страницы

### Выбор элементов
- Множественный выбор элементов
- Состояние выбора сохраняется в памяти
- Выбранные элементы остаются выделенными при пагинации

### Хранение данных
- Все данные хранятся в памяти приложения
- При перезапуске сервера данные сбрасываются
- 1 000 000 элементов инициализируются при запуске

## Ошибки

**400 Bad Request:**
```json
{
  "error": "Page must be a positive integer"
}
```

**500 Internal Server Error:**
```json
{
  "error": "Internal server error"
}
``` 